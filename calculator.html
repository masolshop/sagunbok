<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ê·¼ë³µ AI ìŠ¤íŠœë””ì˜¤ MVP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            background: #f5f7fa;
            display: flex;
            min-height: 100vh;
        }
        .sidebar {
            width: 250px;
            background: #1a2332;
            color: white;
            padding: 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        .logo-text {
            font-size: 16px;
            font-weight: 600;
        }
        .menu-section {
            margin-bottom: 20px;
        }
        .menu-item {
            padding: 12px 16px;
            margin-bottom: 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 14px;
        }
        .menu-item:hover {
            background: rgba(255,255,255,0.1);
        }
        .menu-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-weight: 600;
        }
        .menu-item::before {
            content: 'ğŸ“Š';
            margin-right: 10px;
        }
        .menu-item.ceo::before { content: 'ğŸ‘”'; }
        .menu-item.expert::before { content: 'ğŸ“‹'; }
        .menu-item.network::before { content: 'ğŸŒ'; }
        .menu-item.dashboard::before { content: 'ğŸ“ˆ'; }
        .admin-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        .admin-title {
            font-size: 12px;
            color: rgba(255,255,255,0.5);
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        .context-info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            font-size: 12px;
        }
        .context-title {
            color: rgba(255,255,255,0.5);
            margin-bottom: 5px;
        }
        .main-content {
            margin-left: 250px;
            flex: 1;
            padding: 40px;
        }
        .header {
            background: white;
            padding: 20px 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .header h1 {
            font-size: 28px;
            color: #1a2332;
        }
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .user-name {
            font-weight: 600;
            color: #333;
        }
        .logout-btn {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }
        .logout-btn:hover {
            background: #5568d3;
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }
        .card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        .card-header h2 {
            font-size: 20px;
            color: #1a2332;
        }
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-label {
            font-size: 14px;
            color: #667eea;
            margin-bottom: 8px;
            font-weight: 600;
        }
        .form-input {
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }
        .form-select {
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }
        .tab {
            padding: 12px 24px;
            background: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .tab:hover {
            background: #f5f7fa;
        }
        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .result-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .result-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .result-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        .result-value {
            font-size: 28px;
            font-weight: bold;
            color: #1a2332;
        }
        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 6px;
            margin-top: 20px;
            font-size: 14px;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="logo">
            <div class="logo-icon">S</div>
            <div class="logo-text">ì‚¬ê·¼ë³µ AI<br>STUDIO MVP</div>
        </div>

        <div class="menu-section">
            <div class="menu-item active">ê¸°ì—…ì ˆì„¸ê³„ì‚°ê¸°</div>
            <div class="menu-item ceo">CEOì ˆì„¸ê³„ì‚°ê¸°</div>
            <div class="menu-item expert">ì§ì›ì ˆì„¸ê³„ì‚°ê¸°</div>
            <div class="menu-item network">ë„¤íŠ¸ì›Œí¬ì„¸ê³„ì‚°ê¸°</div>
            <div class="menu-item dashboard">ê¸°ì—…ë¦¬ìŠ¤í¬ì§„ë‹¨</div>
        </div>

        <div class="admin-section">
            <div class="admin-title">â€¢ ADMIN DASHBOARD</div>
            <div class="menu-item dashboard">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</div>
        </div>

        <div class="context-info">
            <div class="context-title">â€¢ ACTIVE CONTEXT</div>
            <div style="color: white; font-weight: 600;">ë‹´ë‹¹ì ëª…í•¨</div>
            <div style="color: rgba(255,255,255,0.7); margin-top: 5px;">ì„œìš¸ â€¢ 0ê±´</div>
        </div>
    </div>

    <div class="main-content">
        <div class="header">
            <h1>ê¸°ì—…ì ˆì„¸ê³„ì‚°ê¸°</h1>
            <div class="user-info">
                <span class="user-name" id="userName">ë¡œë”© ì¤‘...</span>
                <button class="logout-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>

        <p style="color: #666; margin-bottom: 30px; font-size: 16px;">
            ì‚¬ë‚´ê·¼ë¡œë³µì§€ê¸°ê¸ˆ ì¶œì—° ì‹œ ë°œìƒí•˜ëŠ” <strong>ì‹¤ì§ˆì ì¸ ì„¸í›„ ì´ìµì„ ì‚°ì¶œ</strong>í•©ë‹ˆë‹¤.
        </p>

        <div class="card">
            <div class="card-header">
                <span style="font-size: 24px;">ğŸ“Š</span>
                <h2>ê³„ì‚° ì „ í•„ìˆ˜ ì •ë³´ ì…ë ¥</h2>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">íšŒì‚¬ëª…</label>
                    <input type="text" class="form-input" id="companyName" placeholder="í˜ì´ë¨¼">
                </div>
                <div class="form-group">
                    <label class="form-label">ì§€ì—­ (ì‹œ/ë„)</label>
                    <select class="form-select" id="region">
                        <option>ì„œìš¸</option>
                        <option>ê²½ê¸°</option>
                        <option>ì¸ì²œ</option>
                        <option>ë¶€ì‚°</option>
                        <option>ëŒ€êµ¬</option>
                        <option>ê´‘ì£¼</option>
                        <option>ëŒ€ì „</option>
                        <option>ìš¸ì‚°</option>
                        <option>ì„¸ì¢…</option>
                        <option>ê°•ì›</option>
                        <option>ì¶©ë¶</option>
                        <option>ì¶©ë‚¨</option>
                        <option>ì „ë¶</option>
                        <option>ì „ë‚¨</option>
                        <option>ê²½ë¶</option>
                        <option>ê²½ë‚¨</option>
                        <option>ì œì£¼</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">ì „ì²´ ì§ì› ìˆ˜ (ëª…) <span style="color: #667eea;">âš« í•„í•„ìˆ˜ ëŒ€ìƒí¬í•¨</span></label>
                    <input type="number" class="form-input" id="employeeCount" placeholder="500">
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active">ë³µë¦¬í›„ìƒë¹„ì ˆì„¸</button>
            <button class="tab">ë²•ì¸ì„¸ì ˆì„¸</button>
            <button class="tab">ì¢…í•©ì†Œë“ì„¸ì ˆì„¸</button>
        </div>

        <div class="card">
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">ì „ë…„ë„ ë³µë¦¬í›„ìƒë¹„ ì§‘í–‰ ì´ì•¡ (ì›)</label>
                    <input type="number" class="form-input" id="welfareAmount" placeholder="0" value="0">
                </div>
                <div class="form-group">
                    <label class="form-label">ê¸°ê¸ˆ ì „í™˜ ë¹„ìœ¨ (%)</label>
                    <select class="form-select" id="conversionRate">
                        <option>30%</option>
                        <option>40%</option>
                        <option>50%</option>
                        <option>60%</option>
                        <option>70%</option>
                        <option>80%</option>
                        <option>90%</option>
                        <option>100%</option>
                    </select>
                </div>
            </div>

            <div class="result-section">
                <div class="result-card">
                    <div class="result-label">ë³µë¦¬í›„ìƒë¹„ ì ˆì„¸ì•¡</div>
                    <div class="result-value" id="taxSaving">0ì›</div>
                </div>
                <div class="result-card">
                    <div class="result-label">ì˜ˆìƒ ì ˆê° íš¨ê³¼</div>
                    <div class="result-value" id="savingEffect">0%</div>
                </div>
            </div>

            <div class="note">
                ğŸ’¡ <strong>ì•ˆë‚´:</strong> ë³µë¦¬í›„ìƒë¹„ë¥¼ ì‚¬ê·¼ë³µê¸°ê¸ˆìœ¼ë¡œ ì „í™˜í•˜ë©´ ë²•ì¸ì„¸ ê°ë©´ í˜œíƒì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </div>
        </div>
    </div>

    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œê·¸ì¸ í™•ì¸
        window.addEventListener('load', function() {
            const isLoggedIn = localStorage.getItem('sagunbok_logged_in');
            const userDataStr = localStorage.getItem('sagunbok_user');

            if (!isLoggedIn || !userDataStr) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                window.location.href = '/';
                return;
            }

            try {
                const user = JSON.parse(userDataStr);
                displayUserInfo(user);
            } catch (error) {
                console.error('ì‚¬ìš©ì ì •ë³´ íŒŒì‹± ì˜¤ë¥˜:', error);
                alert('ì‚¬ìš©ì ì •ë³´ ì˜¤ë¥˜. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
                logout();
            }
        });

        function displayUserInfo(user) {
            document.getElementById('userName').textContent = user.name + ' ë‹˜';
            
            // íšŒì‚¬ëª… ìë™ ì…ë ¥ (ê¸°ì—…íšŒì›ì¸ ê²½ìš°)
            if (user.userType === 'company' && user.companyName) {
                document.getElementById('companyName').value = user.companyName;
            }
        }

        function logout() {
            localStorage.removeItem('sagunbok_user');
            localStorage.removeItem('sagunbok_logged_in');
            alert('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');
            window.location.href = '/';
        }

        // ê°„ë‹¨í•œ ê³„ì‚° ë¡œì§
        document.getElementById('welfareAmount').addEventListener('input', calculate);
        document.getElementById('conversionRate').addEventListener('change', calculate);

        function calculate() {
            const welfareAmount = parseInt(document.getElementById('welfareAmount').value) || 0;
            const conversionRate = parseInt(document.getElementById('conversionRate').value) || 30;
            
            // ê°„ë‹¨í•œ ì ˆì„¸ì•¡ ê³„ì‚° (ì‹¤ì œ ë¡œì§ì€ ë” ë³µì¡í•  ìˆ˜ ìˆìŒ)
            const taxSaving = Math.floor(welfareAmount * (conversionRate / 100) * 0.22); // ë²•ì¸ì„¸ìœ¨ 22% ê°€ì •
            const savingEffect = welfareAmount > 0 ? ((taxSaving / welfareAmount) * 100).toFixed(1) : 0;
            
            document.getElementById('taxSaving').textContent = taxSaving.toLocaleString() + 'ì›';
            document.getElementById('savingEffect').textContent = savingEffect + '%';
        }

        // ì´ˆê¸° ê³„ì‚°
        calculate();
    </script>
</body>
</html>
