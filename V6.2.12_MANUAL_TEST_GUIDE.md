# V6.2.12 테스트 가이드

## 📝 수동 테스트 체크리스트

### 1. Apps Script 배포 확인 ✅
**스크린샷 확인 완료**: v6.2.12 배포 성공 메시지 확인됨
```json
{"success": true, "version": "6.2.12", "message": "Apps Script v6.2.12 - 올바른 시트 이름으로 수정"}
```

---

### 2. Google Sheets 시트 이름 확인

**필수 시트**:
- ✅ **기업회원** - I열 = 승인여부
- ✅ **사근복매니저** - I열 = 승인여부, G열 = 사용 안 함
- ✅ **사근복컨설턴트** - I열 = 승인여부, G열 = 사용 안 함
- ✅ **로그** - 활동 로그

**시트 확인 방법**:
1. https://docs.google.com/spreadsheets/d/1NzBVwAjDTSQWznBapoD1fGspUvXpvQsozdJVSEF5Atc/edit 접속
2. 시트 탭에서 이름 확인
3. 각 시트의 I열 (9번째 열) = "승인여부" 헤더 확인

---

### 3. 매니저/컨설턴트 로그인 테스트

#### 3-1. 매니저 데이터 확인
**사근복매니저 시트**:
1. 시트 열기
2. 승인된 매니저 찾기 (I열 = "승인")
3. 전화번호 확인 (B열)
4. G열 확인 - 빈 값 또는 "?" 있어도 OK

#### 3-2. 로그인 테스트
**프론트엔드** (http://3.34.186.174/):
1. "매니저 로그인" 선택
2. 전화번호 입력 (예: 01012345678)
3. 비밀번호: `12345` 입력
4. 로그인 버튼 클릭

**예상 결과**:
- ✅ 로그인 성공
- ✅ G열이 "?"여도 로그인 가능 (고정 비밀번호 12345 사용)
- ❌ "승인 대기" 상태면 로그인 불가

#### 3-3. 컨설턴트 로그인 테스트
위와 동일한 절차, "컨설턴트 로그인" 선택

---

### 4. 슈퍼관리자 대시보드 테스트

#### 4-1. 슈퍼관리자 확인
**시트에서 확인**:
- 기업회원, 매니저, 또는 컨설턴트 시트에서
- 전화번호 "01063529091" (이종근) 찾기
- 승인 상태 확인

#### 4-2. 대시보드 로그인
1. http://3.34.186.174/ 접속
2. 해당 회원 타입 선택
3. 전화번호: `01063529091` 입력
4. 비밀번호 입력
5. 로그인

**예상 결과**:
- ✅ 로그인 성공
- ✅ 대시보드 페이지로 이동 (루프 없음!)
- ✅ 회원 목록 표시됨
- ✅ 기업회원, 매니저, 컨설턴트 모두 표시

**이전 버그**:
- ❌ 대시보드 접근 후 다시 로그인 화면으로 튕김 (현재 수정됨)

---

### 5. 회원 가입 및 이메일 발송 테스트

#### 5-1. 기업회원 가입
**준비사항**:
- 매니저 또는 컨설턴트의 실제 이름 확인 (시트에서)

**가입 절차**:
1. http://3.34.186.174/ → "기업회원 가입"
2. 모든 필드 입력
3. **추천인 이름**: 실제 매니저/컨설턴트 이름 입력 (정확하게!)
4. 회원가입 버튼 클릭

**예상 결과**:
- ✅ 가입 성공 메시지
- ✅ 기업회원 시트에 데이터 추가 (I열 = "승인 대기")
- ✅ **이메일 3개 발송**:
  1. 회원 본인 → 가입 환영 이메일
  2. 추천인 (매니저/컨설턴트) → 추천 알림
  3. 관리자 (tysagunbok@gmail.com) → 신규 가입 알림

**확인 방법**:
- tysagunbok@gmail.com 이메일 확인
- 추천인의 이메일 확인
- 가입자의 이메일 확인

#### 5-2. 매니저 가입
1. http://3.34.186.174/ → "매니저 가입"
2. 모든 필드 입력
3. 회원가입

**예상 결과**:
- ✅ 가입 성공
- ✅ 사근복매니저 시트에 데이터 추가
- ✅ G열 = 빈 값 (정상!)
- ✅ I열 = "승인 대기"
- ✅ **이메일 2개 발송**:
  1. 회원 본인 → 가입 환영 이메일 (타입: "사근복매니저")
  2. 관리자 → 신규 가입 알림

#### 5-3. 컨설턴트 가입
매니저와 동일, "컨설턴트 가입" 선택

---

### 6. 추천인 검증 테스트

#### 6-1. 유효한 추천인
**방법**:
1. 사근복매니저 시트에서 실제 이름 복사 (예: "홍길동")
2. 기업회원 가입 시 추천인란에 정확히 입력
3. 가입 시도

**예상 결과**:
- ✅ 가입 성공
- ✅ 추천인에게 이메일 발송됨

#### 6-2. 유효하지 않은 추천인
**방법**:
1. 기업회원 가입
2. 추천인란에 존재하지 않는 이름 입력 (예: "없는사람")
3. 가입 시도

**예상 결과**:
- ❌ 가입 실패
- ❌ 오류 메시지: "유효하지 않은 추천인입니다" (또는 유사한 메시지)

---

### 7. 승인/반려 및 이메일 발송 테스트

#### 7-1. 회원 승인
**대시보드에서**:
1. 슈퍼관리자로 로그인
2. "승인 대기" 상태인 회원 찾기
3. "승인" 버튼 클릭

**예상 결과**:
- ✅ 시트에서 I열 = "승인"으로 변경
- ✅ **회원에게 승인 이메일 발송**
- ✅ 이메일 내용: 
  - 회원 타입: "기업회원", "사근복매니저", 또는 "사근복컨설턴트" (전체 이름)
  - 승인 완료 안내
  - 로그인 가능 안내

#### 7-2. 회원 반려
**대시보드에서**:
1. "승인 대기" 회원 선택
2. "반려" 버튼 클릭

**예상 결과**:
- ✅ 시트에서 I열 = "반려"로 변경
- ✅ **회원에게 반려 이메일 발송**
- ✅ 이메일 내용: 반려 사유 안내

---

### 8. G열 이슈 검증

#### 8-1. G열 상태 확인
**사근복매니저 시트**:
1. G열 데이터 확인
2. 빈 값, "?", 또는 기타 문자 있는지 확인

**사근복컨설턴트 시트**:
1. G열 데이터 확인
2. 빈 값, "?", 또는 기타 문자 있는지 확인

#### 8-2. 로그인 테스트
**G열이 "?" 또는 빈 값인 매니저/컨설턴트 선택**:
1. 해당 전화번호로 로그인 시도
2. 비밀번호: `12345`

**예상 결과**:
- ✅ 로그인 성공! (G열 값과 무관)
- ✅ 코드는 CONFIG.DEFAULT_PASSWORD만 확인
- ✅ row[6] (G열) 체크 안 함

**확인 완료**:
- G열에 "?" 또는 빈 값이 있어도 로그인에 **전혀 영향 없음** ✅

---

### 9. 이메일 내용 확인

#### 9-1. 이메일 발신자
모든 이메일에서 확인:
- ✅ 발신자 이름: "TY사근복헬스케어사업단"
- ✅ 발신 이메일: tysagunbok@gmail.com

#### 9-2. 이메일 타입 라벨
**가입 환영 이메일**:
- 기업회원: "기업회원"
- 매니저: "사근복매니저" (✅ 전체 이름, 짧은 이름 아님)
- 컨설턴트: "사근복컨설턴트" (✅ 전체 이름)

**승인 이메일**:
- 동일하게 전체 시트 이름 사용

**관리자 알림 이메일**:
- 회원 타입이 전체 이름으로 표시

---

### 10. 종합 확인

#### 10-1. 시트 구조
- [x] 모든 시트에서 I열 = 승인여부
- [x] 매니저/컨설턴트 G열 = 사용 안 함 (빈 값 OK)
- [x] 기업회원 G열 = 커스텀 비밀번호

#### 10-2. 로그인 시스템
- [x] 매니저: 비밀번호 12345 사용
- [x] 컨설턴트: 비밀번호 12345 사용
- [x] 기업회원: 가입 시 입력한 비밀번호 사용
- [x] 슈퍼관리자: isSuperAdmin 플래그 설정

#### 10-3. 이메일 시스템
- [x] 기업회원 가입: 3개 이메일
- [x] 매니저/컨설턴트 가입: 2개 이메일
- [x] 승인: 1개 이메일
- [x] 반려: 1개 이메일
- [x] 모든 이메일 타입 라벨 = 전체 시트 이름

#### 10-4. 추천인 검증
- [x] 유효한 이름만 허용
- [x] 매니저/컨설턴트 시트 교차 확인
- [x] 추천인에게 알림 발송

---

## 📊 테스트 결과 기록표

### 로그인 테스트
| 테스트 항목 | 결과 | 비고 |
|-------------|------|------|
| 매니저 로그인 (12345) | ⏳ | |
| 컨설턴트 로그인 (12345) | ⏳ | |
| 슈퍼관리자 로그인 | ⏳ | |
| 대시보드 로그인 루프 없음 | ⏳ | |
| G열 "?" 값 로그인 영향 없음 | ⏳ | |

### 회원 가입 테스트
| 테스트 항목 | 결과 | 비고 |
|-------------|------|------|
| 기업회원 가입 | ⏳ | |
| 매니저 가입 | ⏳ | |
| 컨설턴트 가입 | ⏳ | |
| 유효한 추천인 | ⏳ | |
| 무효한 추천인 거부 | ⏳ | |

### 이메일 발송 테스트
| 테스트 항목 | 결과 | 비고 |
|-------------|------|------|
| 기업회원 가입 - 3개 이메일 | ⏳ | 회원, 추천인, 관리자 |
| 매니저 가입 - 2개 이메일 | ⏳ | 회원, 관리자 |
| 컨설턴트 가입 - 2개 이메일 | ⏳ | 회원, 관리자 |
| 승인 이메일 | ⏳ | |
| 반려 이메일 | ⏳ | |
| 이메일 타입 라벨 = 전체 이름 | ⏳ | |

### 대시보드 테스트
| 테스트 항목 | 결과 | 비고 |
|-------------|------|------|
| 회원 목록 표시 | ⏳ | 기업/매니저/컨설턴트 |
| 승인 기능 | ⏳ | |
| 반려 기능 | ⏳ | |

---

## ✅ 테스트 완료 후

모든 테스트가 통과하면:
1. Pull Request 승인 및 병합
2. 프로덕션 배포 완료 확인
3. 사용자에게 배포 완료 안내

---

## 🔗 관련 링크

- **Pull Request**: https://github.com/masolshop/sagunbok/pull/1
- **Google Sheets**: https://docs.google.com/spreadsheets/d/1NzBVwAjDTSQWznBapoD1fGspUvXpvQsozdJVSEF5Atc/edit
- **Apps Script**: https://script.google.com/home/projects/1BXU0ZcDj81zpKfSBGDnbFpPWFUhZqp_X3zzqLXPpf9C2CxP-kvKY3n5r/edit
- **프론트엔드**: http://3.34.186.174/
- **배포 가이드**: DEPLOYMENT_READY_V6.2.12.md

---

**테스트 진행자**: _______________  
**테스트 날짜**: _______________  
**테스트 결과**: ⏳ 진행 중 / ✅ 통과 / ❌ 실패
