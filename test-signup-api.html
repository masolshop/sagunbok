<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ê·¼ë³µ AI - API í…ŒìŠ¤íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #667eea;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-bottom: 10px;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .result {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-all;
        }
        
        .success {
            border-color: #10b981;
            background: #d1fae5;
        }
        
        .error {
            border-color: #ef4444;
            background: #fee2e2;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .status {
            text-align: center;
            padding: 15px;
            background: #eff6ff;
            border-radius: 8px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ì‚¬ê·¼ë³µ AI - API í…ŒìŠ¤íŠ¸</h1>
        
        <div class="status" id="backendStatus">
            ë°±ì—”ë“œ ìƒíƒœ í™•ì¸ ì¤‘...
        </div>
        
        <!-- 1. í—¬ìŠ¤ì²´í¬ -->
        <div class="test-section">
            <h2>1ï¸âƒ£ í—¬ìŠ¤ì²´í¬</h2>
            <button onclick="testHealth()">ë°±ì—”ë“œ ìƒíƒœ í™•ì¸</button>
            <div id="healthResult" class="result" style="display:none;"></div>
        </div>
        
        <!-- 2. ì»¨ì„¤í„´íŠ¸ ê°€ì… -->
        <div class="test-section">
            <h2>2ï¸âƒ£ ì»¨ì„¤í„´íŠ¸ íšŒì›ê°€ì…</h2>
            <button onclick="testConsultantSignup()">í™ê¸¸ë™ ì»¨ì„¤í„´íŠ¸ ê°€ì…</button>
            <div id="consultantResult" class="result" style="display:none;"></div>
        </div>
        
        <!-- 3. ê¸°ì—…íšŒì› ê°€ì… -->
        <div class="test-section">
            <h2>3ï¸âƒ£ ê¸°ì—…íšŒì› ê°€ì… (ì¶”ì²œì¸: í™ê¸¸ë™)</h2>
            <button onclick="testCompanySignup()">ê¹€ì² ìˆ˜ ê¸°ì—…íšŒì› ê°€ì…</button>
            <div id="companyResult" class="result" style="display:none;"></div>
        </div>
        
        <!-- 4. ì»¨ì„¤í„´íŠ¸ ë¡œê·¸ì¸ -->
        <div class="test-section">
            <h2>4ï¸âƒ£ ì»¨ì„¤í„´íŠ¸ ë¡œê·¸ì¸</h2>
            <button onclick="testConsultantLogin()">í™ê¸¸ë™ ë¡œê·¸ì¸ (ë¹„ë°€ë²ˆí˜¸: 12345)</button>
            <div id="consultantLoginResult" class="result" style="display:none;"></div>
        </div>
        
        <!-- 5. ê¸°ì—…íšŒì› ë¡œê·¸ì¸ -->
        <div class="test-section">
            <h2>5ï¸âƒ£ ê¸°ì—…íšŒì› ë¡œê·¸ì¸ (ìŠ¹ì¸ í›„ í…ŒìŠ¤íŠ¸)</h2>
            <button onclick="testCompanyLogin()">ê¹€ì² ìˆ˜ ë¡œê·¸ì¸</button>
            <div id="companyLoginResult" class="result" style="display:none;"></div>
        </div>
    </div>
    
    <script>
        const BACKEND_URL = 'https://script.google.com/macros/s/AKfycbwB26bKC8LI0MVYdmGptMYEXeiD4XtbrI5jsbxWheQbpBstq4ECHGQ_YfrhvEoOFKIM4g/exec';
        
        async function callAPI(action, data) {
            const response = await fetch(BACKEND_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action, ...data }),
                redirect: 'follow'
            });
            return response.json();
        }
        
        function showResult(elementId, data, isError = false) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.className = 'result ' + (isError ? 'error' : 'success');
            element.textContent = JSON.stringify(data, null, 2);
        }
        
        async function testHealth() {
            try {
                const response = await fetch(BACKEND_URL);
                const data = await response.json();
                showResult('healthResult', data);
                document.getElementById('backendStatus').innerHTML = 'âœ… ë°±ì—”ë“œ ì •ìƒ ì‘ë™ ì¤‘ (v' + data.version + ')';
            } catch (error) {
                showResult('healthResult', { error: error.message }, true);
                document.getElementById('backendStatus').innerHTML = 'âŒ ë°±ì—”ë“œ ì˜¤ë¥˜';
            }
        }
        
        async function testConsultantSignup() {
            try {
                const data = await callAPI('registerConsultant', {
                    name: 'í™ê¸¸ë™',
                    phone: '010-8765-4321',
                    email: 'hong@sagunbok.com',
                    position: 'ìˆ˜ì„ ì»¨ì„¤í„´íŠ¸',
                    businessUnit: 'ì„œìš¸ì‚¬ì—…ë‹¨',
                    branchOffice: 'ê°•ë‚¨ì§€ì‚¬'
                });
                showResult('consultantResult', data, data.status !== 'success');
            } catch (error) {
                showResult('consultantResult', { error: error.message }, true);
            }
        }
        
        async function testCompanySignup() {
            try {
                const data = await callAPI('registerCompany', {
                    companyName: 'í…ŒìŠ¤íŠ¸ì£¼ì‹íšŒì‚¬',
                    companyType: 'ë²•ì¸',
                    referrer: 'í™ê¸¸ë™',
                    name: 'ê¹€ì² ìˆ˜',
                    phone: '010-1234-5678',
                    email: 'test@company.com',
                    password: 'test1234'
                });
                showResult('companyResult', data, data.status !== 'success');
            } catch (error) {
                showResult('companyResult', { error: error.message }, true);
            }
        }
        
        async function testConsultantLogin() {
            try {
                const data = await callAPI('loginConsultant', {
                    phone: '010-8765-4321',
                    password: '12345'
                });
                showResult('consultantLoginResult', data, data.status !== 'success');
            } catch (error) {
                showResult('consultantLoginResult', { error: error.message }, true);
            }
        }
        
        async function testCompanyLogin() {
            try {
                const data = await callAPI('loginCompany', {
                    phone: '010-1234-5678',
                    password: 'test1234'
                });
                showResult('companyLoginResult', data, data.status !== 'success');
            } catch (error) {
                showResult('companyLoginResult', { error: error.message }, true);
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ í—¬ìŠ¤ì²´í¬
        window.onload = function() {
            testHealth();
        };
    </script>
</body>
</html>
