# V6.2.12 테스트 리포트

**날짜**: 2026-01-24  
**버전**: v6.2.12  
**상태**: API URL 확인 필요

---

## 📝 테스트 진행 상황

### ✅ 완료된 작업
1. **코드 완성** - v6.2.12 모든 기능 구현
2. **Pull Request** - https://github.com/masolshop/sagunbok/pull/1  
3. **Apps Script 배포** - 스크린샷에서 성공 확인됨
4. **문서화** - 배포 가이드, 테스트 가이드 작성 완료

### ⚠️ API URL 문제

**제공받은 URL**: 
```
https://script.google.com/macros/s/AKfycbyX1U4or4dM8jNdrMEquuW0SKAnFXx7bUKG-Z58De0/dev
```

**문제**:
- `/dev` 엔드포인트 응답 없음 (빈 응답)
- `/exec` 엔드포인트 시도 → `Error code INTERNAL`
- URL이 불완전한 것으로 보임 (일반적으로 더 긴 ID 필요)

**해결 방법**:

Apps Script 에디터에서 정확한 Web App URL을 확인해주세요:

1. **Apps Script 프로젝트 열기**:
   ```
   https://script.google.com/home/projects/1BXU0ZcDj81zpKfSBGDnbFpPWFUhZqp_X3zzqLXPpf9C2CxP-kvKY3n5r/edit
   ```

2. **배포 URL 확인**:
   - 상단 메뉴: **Deploy** → **Manage Deployments**
   - 현재 활성 배포의 **Web app URL** 복사
   - URL 형식: `https://script.google.com/macros/s/XXXXX.../exec`

3. **전체 URL 제공**:
   - URL이 보통 매우 길며 `/exec`로 끝남
   - 예: `https://script.google.com/macros/s/AKfycbxXXXXXXXXXXXXXXXXXXXX/exec`

---

## 🧪 준비된 테스트 스크립트

올바른 API URL을 받으면 다음 테스트를 자동으로 실행할 수 있습니다:

### 1. 기본 API 테스트
- ✅ 버전 확인 (`getVersion`)
- ✅ 회원 목록 조회 (`getAllMembers`)
- ✅ 시트 이름 확인 (사근복매니저, 사근복컨설턴트)

### 2. 로그인 테스트
- ✅ 매니저 로그인 (비밀번호 12345)
- ✅ 컨설턴트 로그인 (비밀번호 12345)
- ✅ 슈퍼관리자 확인 (01063529091)
- ✅ 잘못된 비밀번호 거부 확인

### 3. G열 이슈 검증
- ✅ G열 "?" 값이 있는 매니저/컨설턴트 로그인 테스트
- ✅ 로그인 성공 확인 (G열 무관)

### 4. 회원 가입 테스트 (API URL 필요)
- 기업회원 가입
- 매니저 가입
- 컨설턴트 가입
- 추천인 검증

### 5. 이메일 발송 테스트 (수동 확인)
- tysagunbok@gmail.com 이메일 확인
- 이메일 타입 라벨 확인 (전체 시트 이름)

---

## 📊 수동 테스트 가능 항목

API URL 없이도 확인 가능한 항목들:

### ✅ Google Sheets 직접 확인

**Sheets URL**:
```
https://docs.google.com/spreadsheets/d/1NzBVwAjDTSQWznBapoD1fGspUvXpvQsozdJVSEF5Atc/edit
```

**확인 사항**:

1. **시트 이름**:
   - ✅ "기업회원" 시트 존재
   - ✅ "사근복매니저" 시트 존재 (✓ 올바른 이름)
   - ✅ "사근복컨설턴트" 시트 존재 (✓ 올바른 이름)
   - ✅ "로그" 시트 존재
   - ❌ "사근복컨설턴트(매니저)" 시트 없어야 함

2. **컬럼 구조** (모든 시트):
   - I열 (9번째 열) = "승인여부" 또는 "승인상태"
   - 값: "승인", "승인 대기", "반려"

3. **G열 확인** (매니저/컨설턴트):
   - G열 헤더 = 비어있거나 사용 안 함
   - 데이터 = 빈 값 또는 "?" (정상!)
   - 이 값이 로그인에 영향 없음

4. **슈퍼관리자**:
   - 전화번호 "01063529091" 존재
   - 이름 "이종근"
   - 승인 상태 확인

---

## ✅ 프론트엔드 수동 테스트

**URL**: http://3.34.186.174/

### 1. 로그인 테스트

#### 매니저 로그인:
1. "매니저 로그인" 선택
2. 전화번호: (Sheets에서 승인된 매니저 번호)
3. 비밀번호: `12345`
4. 로그인 버튼 클릭

**예상 결과**:
- ✅ 로그인 성공
- ✅ G열 "?" 있어도 로그인 가능

#### 컨설턴트 로그인:
1. "컨설턴트 로그인" 선택
2. 전화번호: (Sheets에서 승인된 컨설턴트 번호)
3. 비밀번호: `12345`
4. 로그인

**예상 결과**:
- ✅ 로그인 성공
- ✅ G열 "?" 있어도 로그인 가능

#### 슈퍼관리자 대시보드:
1. 해당 회원 타입으로 로그인 (기업/매니저/컨설턴트)
2. 전화번호: `01063529091`
3. 비밀번호 입력
4. 로그인

**예상 결과**:
- ✅ 로그인 성공
- ✅ 대시보드 페이지로 이동 (루프 없음!)
- ✅ 회원 목록 표시:
  - 기업회원
  - 사근복매니저 (✓ 전체 이름)
  - 사근복컨설턴트 (✓ 전체 이름)

### 2. 회원 가입 테스트

#### 기업회원 가입:
1. "기업회원 가입" 선택
2. 모든 필드 입력
3. **추천인**: Sheets에서 실제 매니저/컨설턴트 이름 정확히 입력
4. 가입 버튼 클릭

**예상 결과**:
- ✅ 가입 성공
- ✅ Sheets "기업회원" 시트에 데이터 추가
- ✅ I열 = "승인 대기"
- ✅ **이메일 3개 발송**:
  1. 회원 본인 → 가입 환영
  2. 추천인 → 추천 알림
  3. 관리자 (tysagunbok@gmail.com) → 신규 가입 알림

#### 매니저 가입:
1. "매니저 가입" 선택
2. 모든 필드 입력
3. 가입

**예상 결과**:
- ✅ 가입 성공
- ✅ Sheets "사근복매니저" 시트에 데이터 추가
- ✅ G열 = 빈 값 (정상!)
- ✅ I열 = "승인 대기"
- ✅ **이메일 2개 발송**:
  1. 회원 본인 → 가입 환영 (타입: "사근복매니저")
  2. 관리자 → 신규 가입 알림

#### 컨설턴트 가입:
- 매니저와 동일
- 이메일 타입 라벨: "사근복컨설턴트"

### 3. 추천인 검증 테스트

#### 유효한 추천인:
1. Sheets "사근복매니저"에서 실제 이름 복사
2. 기업회원 가입 시 추천인란에 정확히 입력
3. 가입

**예상 결과**:
- ✅ 가입 성공
- ✅ 추천인에게 이메일 발송

#### 유효하지 않은 추천인:
1. 기업회원 가입
2. 추천인란에 존재하지 않는 이름 입력
3. 가입 시도

**예상 결과**:
- ❌ 가입 실패
- ❌ 오류 메시지 표시

### 4. 승인/반려 테스트

#### 승인:
1. 슈퍼관리자로 로그인
2. 대시보드에서 "승인 대기" 회원 선택
3. "승인" 버튼 클릭

**예상 결과**:
- ✅ Sheets I열 = "승인"
- ✅ 회원에게 승인 이메일 발송
- ✅ 이메일 내 회원 타입 = 전체 시트 이름

#### 반려:
1. "승인 대기" 회원 선택
2. "반려" 버튼 클릭

**예상 결과**:
- ✅ Sheets I열 = "반려"
- ✅ 회원에게 반려 이메일 발송

---

## 📧 이메일 확인

**tysagunbok@gmail.com** 이메일함 확인:

### 확인 사항:
1. **발신자 이름**: "TY사근복헬스케어사업단"
2. **발신 이메일**: tysagunbok@gmail.com
3. **회원 타입 라벨**:
   - "기업회원" (기업회원인 경우)
   - "사근복매니저" (✓ 전체 이름, "매니저" 아님)
   - "사근복컨설턴트" (✓ 전체 이름, "컨설턴트" 아님)

---

## 🎯 핵심 확인 사항

### ✅ v6.2.12 주요 수정 사항

1. **시트 이름 수정**:
   - ❌ '사근복컨설턴트(매니저)' 제거
   - ✅ '사근복매니저' 사용
   - ✅ '사근복컨설턴트' 사용

2. **이메일 타입 라벨**:
   - ❌ 짧은 이름 ('매니저', '컨설턴트')
   - ✅ 전체 이름 ('사근복매니저', '사근복컨설턴트')

3. **G열 문서화**:
   - ✅ 매니저/컨설턴트는 G열 사용 안 함
   - ✅ 고정 비밀번호 12345 사용
   - ✅ G열 "?" 또는 빈 값이 로그인에 영향 없음

4. **대시보드 로그인 루프**:
   - ✅ isSuperAdmin 필드 추가
   - ✅ 01063529091 슈퍼관리자 특별 처리

5. **추천인 검증**:
   - ✅ 매니저/컨설턴트 이름 교차 확인
   - ✅ 유효한 이름만 허용

---

## 📋 테스트 결과 기록표

| 테스트 항목 | 결과 | 비고 |
|-------------|------|------|
| **API 테스트** | | |
| 버전 확인 | ⏳ | API URL 필요 |
| 회원 목록 조회 | ⏳ | API URL 필요 |
| **로그인 테스트** | | |
| 매니저 로그인 (12345) | ⏳ | 프론트엔드 테스트 |
| 컨설턴트 로그인 (12345) | ⏳ | 프론트엔드 테스트 |
| 슈퍼관리자 로그인 | ⏳ | 프론트엔드 테스트 |
| 대시보드 루프 없음 | ⏳ | 프론트엔드 테스트 |
| G열 "?" 로그인 가능 | ⏳ | 프론트엔드 테스트 |
| **회원 가입 테스트** | | |
| 기업회원 가입 | ⏳ | 프론트엔드 테스트 |
| 매니저 가입 | ⏳ | 프론트엔드 테스트 |
| 컨설턴트 가입 | ⏳ | 프론트엔드 테스트 |
| 추천인 검증 (유효) | ⏳ | 프론트엔드 테스트 |
| 추천인 검증 (무효) | ⏳ | 프론트엔드 테스트 |
| **이메일 테스트** | | |
| 기업회원 가입 (3개) | ⏳ | 이메일 확인 |
| 매니저 가입 (2개) | ⏳ | 이메일 확인 |
| 컨설턴트 가입 (2개) | ⏳ | 이메일 확인 |
| 승인 이메일 | ⏳ | 이메일 확인 |
| 반려 이메일 | ⏳ | 이메일 확인 |
| 이메일 타입 라벨 | ⏳ | 전체 이름 확인 |
| **대시보드 테스트** | | |
| 회원 목록 표시 | ⏳ | 프론트엔드 테스트 |
| 승인 기능 | ⏳ | 프론트엔드 테스트 |
| 반려 기능 | ⏳ | 프론트엔드 테스트 |
| **Sheets 확인** | | |
| 시트 이름 정확성 | ⏳ | Google Sheets 확인 |
| I열 = 승인여부 | ⏳ | Google Sheets 확인 |
| G열 구조 확인 | ⏳ | Google Sheets 확인 |

---

## 🔧 다음 단계

### 즉시 필요:
1. **올바른 Apps Script Web App URL 제공**
   - Apps Script Deploy → Manage Deployments에서 확인
   - 전체 URL 복사 (매우 길며 `/exec`로 끝남)

### URL 받은 후:
1. ✅ 자동 API 테스트 실행
2. ✅ 로그인 기능 검증
3. ✅ G열 이슈 확인
4. ✅ 시트 이름 정확성 확인

### 프론트엔드 테스트:
1. ✅ http://3.34.186.174/ 에서 수동 테스트
2. ✅ 회원 가입 및 이메일 확인
3. ✅ 추천인 검증 확인
4. ✅ 승인/반려 및 이메일 확인

---

## 📞 문의 및 지원

**Pull Request**: https://github.com/masolshop/sagunbok/pull/1  
**Google Sheets**: https://docs.google.com/spreadsheets/d/1NzBVwAjDTSQWznBapoD1fGspUvXpvQsozdJVSEF5Atc/edit  
**Apps Script**: https://script.google.com/home/projects/1BXU0ZcDj81zpKfSBGDnbFpPWFUhZqp_X3zzqLXPpf9C2CxP-kvKY3n5r/edit

---

**테스트 상태**: ⏳ API URL 대기 중  
**배포 상태**: ✅ v6.2.12 배포 완료 (스크린샷 확인됨)  
**코드 상태**: ✅ 모든 기능 구현 완료
