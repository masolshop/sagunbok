# ✅ V5.4.2 배포 체크리스트

**배포일**: 2026-01-21  
**버전**: V5.4.2 FINAL  
**Apps Script URL**: `...EatGWP09pDnYQw/exec`

---

## 📋 배포 완료 확인

### ✅ 1. Apps Script 배포
- [x] V5.4.2 코드 배포 완료
- [x] 배포 URL 확인
- [x] 로그인 테스트 정상 작동

### ✅ 2. 프록시 서버 업데이트
- [x] proxy-server.js URL 업데이트
- [x] PM2 재시작 완료
- [x] Health check 정상

### ✅ 3. 코드 변경사항
- [x] 사근복컨설턴트 시트 I열 승인상태 추가
- [x] registerConsultant() 함수: I열 저장
- [x] loginConsultant() 함수: I열 읽기, approvalStatus 반환

---

## 🧪 테스트 체크리스트

### 🔲 A. 기업회원 가입 테스트

#### 입력 데이터:
```
회사명:     최종테스트병원
기업유형:   병의원개인사업자
담당자:     최종테스터
휴대폰:     01099998888
이메일:     final@test.com
비밀번호:   test1234
추천인:     김철수
```

#### 확인 사항:
- [ ] 가입 성공 메시지 표시
- [ ] Google Sheets 기업회원 시트에 데이터 저장
- [ ] C열: 기업유형 정상 저장 (병의원개인사업자)
- [ ] E열: 핸드폰 번호 형식 정상 (010-9999-8888)
- [ ] H열: 추천인 정상 저장 (김철수)
- [ ] I열: 승인상태 저장 (승인전표)

---

### 🔲 B. 컨설턴트 가입 테스트

#### 입력 데이터:
```
이름:       테스트컨설턴트
핸드폰:     01088887777
이메일:     consultant@test.com
직함:       대리
소속 사업단: 테스트사업단
비밀번호:   test1234
소속 지사:   테스트지사
```

#### 확인 사항:
- [ ] 가입 성공 메시지 표시
- [ ] Google Sheets 사근복컨설턴트 시트에 데이터 저장
- [ ] B열: 핸드폰 번호 형식 정상 (010-8888-7777)
- [ ] I열: 승인상태 저장 (승인전표) ✨ **NEW!**

---

### 🔲 C. 기업회원 로그인 테스트

#### 입력 데이터:
```
핸드폰:     01099998888
비밀번호:   test1234
```

#### 확인 사항:
- [ ] 로그인 성공
- [ ] userData 반환 확인
- [ ] approvalStatus 필드 존재 (승인전표)

---

### 🔲 D. 컨설턴트 로그인 테스트

#### 입력 데이터:
```
핸드폰:     01088887777
비밀번호:   test1234
```

#### 확인 사항:
- [ ] 로그인 성공
- [ ] userData 반환 확인
- [ ] approvalStatus 필드 존재 (승인전표) ✨ **NEW!**

---

## 🔍 브라우저 개발자 도구 확인

### Network 탭:
- [ ] POST http://3.34.186.174:3001/api/auth
- [ ] Status: 200 OK
- [ ] Response JSON 확인

### Console 탭:
- [ ] JavaScript 오류 없음
- [ ] API 호출 로그 정상

---

## 📊 Google Sheets 최종 확인

### [기업회원] 시트:
```
A: 가입일시      ✓
B: 회사명        ✓
C: 기업유형      ✓ (병의원개인사업자)
D: 이름          ✓
E: 핸드폰번호    ✓ (010-9999-8888 형식)
F: 이메일        ✓
G: 비밀번호      ✓
H: 추천인        ✓ (김철수)
I: 승인상태      ✓ (승인전표)
J: (비어있음)    
K: 마지막로그인  
```

### [사근복컨설턴트] 시트:
```
A: 이름          ✓
B: 핸드폰번호    ✓ (010-8888-7777 형식)
C: 이메일        ✓
D: 직함          ✓
E: 소속 사업단   ✓
F: 비밀번호      ✓
G: 소속 지사     ✓
H: 가입일시      ✓
I: 승인상태      ✓ (승인전표) ✨ **NEW!**
```

---

## 🎯 최종 확인 사항

- [ ] 기업회원과 컨설턴트 모두 I열에 승인상태 저장 확인
- [ ] 로그인 시 approvalStatus 필드 반환 확인
- [ ] 전화번호 형식 정상 (앞자리 0 손실 없음)
- [ ] 추천인 검증 정상 작동
- [ ] 중복 가입 방지 정상 작동

---

## 📁 관련 파일

```
/home/user/webapp/
├── docs/apps-script-v5/
│   ├── APPS_SCRIPT_V5.4_FINAL.js (V5.4.2)
│   ├── CLEAN_RESTART_GUIDE.md
│   └── V5.4.2_CONSULTANT_APPROVAL_STATUS.md
├── proxy-server.js (업데이트 완료)
├── CONSULTANT_APPROVAL_STATUS_UPDATE.md
└── DEPLOYMENT_CHECKLIST_V5.4.2.md (이 문서)
```

---

## 🔖 Git 커밋

```
730c989 - feat: 프록시 서버 URL 업데이트 - V5.4 Apps Script 배포
e84ada8 - docs: 컨설턴트 승인상태 업데이트 빠른 요약
729c3e2 - docs: 컨설턴트 승인상태 추가 빠른 가이드 문서
e2db22f - feat: 사근복컨설턴트 시트에 I열 승인상태 추가 (V5.4.2)
```

---

## ⚠️ 문제 발생 시

### 1. 가입이 안 되는 경우:
- [ ] F12 Network 탭에서 에러 메시지 확인
- [ ] Apps Script 로그 확인 (Ctrl+Enter)
- [ ] 프록시 서버 로그 확인: `pm2 logs proxy-server`

### 2. 데이터가 저장되지 않는 경우:
- [ ] Google Sheets 헤더 확인 (I열: 승인상태)
- [ ] E열과 B열 형식이 "일반 텍스트"인지 확인
- [ ] Apps Script 배포 URL이 올바른지 확인

### 3. 추천인 오류가 발생하는 경우:
- [ ] 사근복컨설턴트 시트에 김철수, 이영희, 박민수 데이터 존재 확인
- [ ] A열 이름이 정확히 일치하는지 확인

---

## 🎉 배포 완료!

모든 체크리스트를 완료하면 V5.4.2 배포가 성공적으로 완료된 것입니다!

**다음 단계**: 브라우저에서 http://3.34.186.174 접속하여 테스트 시작!
